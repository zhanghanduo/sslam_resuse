<launch>
    <arg name="config_path"           default="$(find sslam_fusion)/config/bus_crop/stereo_config.yaml"/>
    <param name="use_sim_time" value="true" />
    <include file="$(find undistort_images)/launch/bus_crop.launch" />
    <node pkg="loop_fusion" type="loop_fusion_node" name="loop_fusion_node" output="screen" >
        <param name="config_path"     value="$(arg config_path)" />
    </node>

    <node pkg="sslam_fusion" type="sslam_fusion_node" name="sslam_fusion_node" output="screen" >
        <param name="config_path"     value="$(arg config_path)" />
    </node>

    <node pkg="ros_utils" type="pose_to_path" name="gps_path">
        <remap from="pose"                  to="/gps_pose" />
        <remap from="path"                  to="/gps/path" />
        <param name="map_frame"             value="world" />
        <param name="frame_id"              value="world" />
        <param name="is_camera_frame"       value="true" />
        <param name="base_frame"            value="gps" />
        <param name="init_origin"           value="true" />
        <param name="publish_transform"     value="false" />
    </node>

    <!--<include file="$(find stereo_viewer)/launch/capture.launch" />-->

    <node name="rvizvisualisation" pkg="rviz" type="rviz" output="log" args="-d $(find sslam_fusion)/config/sslam_rviz_config.rviz" />
</launch>
